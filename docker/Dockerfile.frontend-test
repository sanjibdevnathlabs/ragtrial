# Dockerfile for Frontend Tests
# Runs tests in a clean environment similar to migration container

FROM node:22-alpine

# Set working directory
WORKDIR /app

# Install make and bash for Makefile support
RUN apk add --no-cache make bash

# Copy only necessary files for frontend tests
COPY Makefile ./
COPY frontend/package*.json ./frontend/

# Install frontend dependencies
WORKDIR /app/frontend
RUN npm ci

# Copy frontend source code
WORKDIR /app
COPY frontend/ ./frontend/

# Set the default command to run tests
CMD ["make", "SHELL=/bin/sh", "frontend-test-ci"]

